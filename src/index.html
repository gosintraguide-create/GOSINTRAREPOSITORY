<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
    <meta name="theme-color" content="#0A4D5C" />
    <!-- Modern PWA meta tags -->
    <meta name="mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
    <meta name="apple-mobile-web-app-title" content="Hop On Sintra" />
    
    <!-- PWA Manifest -->
    <link rel="manifest" href="/manifest.json" />
    
    <!-- Favicon - Will be dynamically loaded by DynamicFavicon component -->
    
    <!-- Preconnect to external domains for better performance -->
    <link rel="preconnect" href="https://images.unsplash.com" crossorigin />
    <link rel="preconnect" href="https://esm.sh" crossorigin />
    <link rel="dns-prefetch" href="https://images.unsplash.com" />
    <link rel="dns-prefetch" href="https://js.stripe.com" />
    <link rel="preconnect" href="https://js.stripe.com" crossorigin />
    
    <!-- Initial meta tags (will be updated by SEOHead component) -->
    <title>Hop On Sintra - Premium Hop-On/Hop-Off Day Pass | Small Vehicle Tours</title>
    <meta name="description" content="Explore Sintra's UNESCO World Heritage palaces and attractions with guaranteed seating in small vehicles. Premium hop-on/hop-off day pass with unlimited rides. Book your Sintra adventure online." />
    <meta name="keywords" content="Sintra tours, Sintra transport, hop on hop off Sintra, Pena Palace, Quinta da Regaleira, Sintra day pass, Portugal tours, Sintra attractions, Moorish Castle, Monserrate Palace, small vehicle tours, tuk tuk Sintra" />
    <meta name="author" content="Hop On Sintra" />
    <meta name="robots" content="index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1" />
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://www.hoponsintra.com/" />
    <meta property="og:title" content="Hop On Sintra - Premium Hop-On/Hop-Off Day Pass | Small Vehicle Tours" />
    <meta property="og:description" content="Explore Sintra's UNESCO World Heritage palaces and attractions with guaranteed seating in small vehicles. Premium hop-on/hop-off day pass with unlimited rides." />
    <meta property="og:image" content="https://images.unsplash.com/photo-1585208798174-6cedd86e019a?w=1200&h=630&fit=crop" />
    <meta property="og:image:width" content="1200" />
    <meta property="og:image:height" content="630" />
    <meta property="og:locale" content="en_US" />
    <meta property="og:site_name" content="Hop On Sintra" />
    
    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:url" content="https://www.hoponsintra.com/" />
    <meta name="twitter:title" content="Hop On Sintra - Premium Hop-On/Hop-Off Day Pass | Small Vehicle Tours" />
    <meta name="twitter:description" content="Explore Sintra's UNESCO World Heritage palaces and attractions with guaranteed seating in small vehicles. Premium hop-on/hop-off day pass with unlimited rides." />
    <meta name="twitter:image" content="https://images.unsplash.com/photo-1585208798174-6cedd86e019a?w=1200&h=630&fit=crop" />
    
    <!-- Geo tags -->
    <meta name="geo.region" content="PT-11" />
    <meta name="geo.placename" content="Sintra" />
    <meta name="geo.position" content="38.7967;-9.3842" />
    <meta name="ICBM" content="38.7967, -9.3842" />
    
    <!-- Structured Data - Enhanced for SEO -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@graph": [
        {
          "@type": "TouristAttraction",
          "@id": "https://www.hoponsintra.com/#touristattraction",
          "name": "Hop On Sintra",
          "description": "Premium hop-on/hop-off day pass service in Sintra, Portugal with guaranteed seating in small vehicles. Visit Pena Palace, Quinta da Regaleira, Moorish Castle, and more.",
          "url": "https://www.hoponsintra.com",
          "image": "https://images.unsplash.com/photo-1585208798174-6cedd86e019a",
          "address": {
            "@type": "PostalAddress",
            "addressLocality": "Sintra",
            "addressRegion": "Lisboa",
            "addressCountry": "PT"
          },
          "geo": {
            "@type": "GeoCoordinates",
            "latitude": 38.7967,
            "longitude": -9.3842
          },
          "openingHoursSpecification": {
            "@type": "OpeningHoursSpecification",
            "dayOfWeek": ["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],
            "opens": "09:00",
            "closes": "19:00"
          },
          "priceRange": "â‚¬â‚¬",
          "aggregateRating": {
            "@type": "AggregateRating",
            "ratingValue": "4.8",
            "reviewCount": "250",
            "bestRating": "5"
          }
        },
        {
          "@type": "Service",
          "@id": "https://www.hoponsintra.com/#service",
          "serviceType": "Hop-on Hop-off Day Pass",
          "provider": {
            "@type": "Organization",
            "name": "Hop On Sintra"
          },
          "areaServed": {
            "@type": "City",
            "name": "Sintra"
          },
          "hasOfferCatalog": {
            "@type": "OfferCatalog",
            "name": "Day Pass Options",
            "itemListElement": [
              {
                "@type": "Offer",
                "itemOffered": {
                  "@type": "Product",
                  "name": "Full Day Pass",
                  "description": "Unlimited rides between all Sintra attractions"
                }
              }
            ]
          }
        },
        {
          "@type": "WebSite",
          "@id": "https://www.hoponsintra.com/#website",
          "url": "https://www.hoponsintra.com",
          "name": "Hop On Sintra",
          "description": "Premium hop-on/hop-off day pass service in Sintra, Portugal",
          "potentialAction": {
            "@type": "SearchAction",
            "target": "https://www.hoponsintra.com/?search={search_term_string}",
            "query-input": "required name=search_term_string"
          }
        }
      ]
    }
    </script>
    
    <!-- Performance: Preload critical resources -->
    <link rel="preload" href="/manifest.json" as="fetch" crossorigin="anonymous" />
    
    <!-- Google tag (gtag.js) - Replace YOUR_GA_ID with your actual Google Analytics ID -->
    <!-- <script async src="https://www.googletagmanager.com/gtag/js?id=YOUR_GA_ID"></script> -->
    <!-- <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'YOUR_GA_ID');
    </script> -->
  </head>
  <body>
    <div id="root"></div>
    
    <!-- Cache clearing script - loads FIRST before any modules -->
    <script src="/clear-cache.js"></script>
    
    <!-- Main app entry point -->
    <script type="module" src="/src/main.tsx"></script>
    
    <!-- Error detection script -->
    <script>
      // Detect module loading errors early
      window.addEventListener('error', function(e) {
        // Check for syntax errors that indicate HTML being parsed as JavaScript
        if (e.message && (
          e.message.includes('Unexpected token') || 
          e.message.includes('Unexpected identifier') ||
          e.message.includes('expected expression')
        )) {
          console.error('ðŸš¨ Module loading error detected:', e.message);
          console.error('This usually means a 404 page is being loaded as JavaScript');
          console.error('Error details:', {
            message: e.message,
            filename: e.filename,
            lineno: e.lineno,
            colno: e.colno
          });
          
          // Try to clear service worker cache and reload
          if ('serviceWorker' in navigator && 'caches' in window) {
            console.log('Attempting to clear cache and reload...');
            caches.keys().then(function(names) {
              return Promise.all(
                names.map(function(name) {
                  return caches.delete(name);
                })
              );
            }).then(function() {
              console.log('Cache cleared, reloading page...');
              // Only reload once to prevent infinite loops
              if (!sessionStorage.getItem('reloadAttempted')) {
                sessionStorage.setItem('reloadAttempted', 'true');
                window.location.reload();
              } else {
                console.error('Reload already attempted. Please clear your browser cache manually.');
                sessionStorage.removeItem('reloadAttempted');
              }
            });
          }
        }
      }, true);
      
      // Clear reload flag on successful load
      window.addEventListener('load', function() {
        sessionStorage.removeItem('reloadAttempted');
      });
    </script>
  </body>
</html>